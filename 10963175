-- Library
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Player = game.Players.LocalPlayer
local Window = OrionLib:MakeWindow({Name = "Kyro - By Nova", IntroText = "Kyro", HidePremium = false, SaveConfig = false, ConfigFolder = "ScriptSlayers"})

OrionLib:MakeNotification({
    Name = "You logged in!",
    Content = "You logged in as "..Player.Name..".",
    Image = "rbxassetid://14836421904",
    Time = 5
})

local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://14828079730",
    PremiumOnly = false
})

local Section = MainTab:AddSection({
    Name = "Main Section"
})

local OtherTab = Window:MakeTab({
    Name = "Other's",
    Icon = "rbxassetid://14828080427",
    PremiumOnly = false
})

local Section = OtherTab:AddSection({
    Name = "Others Section"
})

OtherTab:AddButton({
    Name = "Admin Cmd",
    Callback = function()
        loadstring(game:HttpGet(('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'), true))()
    end
})

OtherTab:AddButton({
    Name = "Exit",
    Callback = function()
        OrionLib:Destroy()
    end
})

local recipientTextBox
local moneyTextBox
local multiplierDropdown

local multipliers = {1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100}

MainTab:AddTextbox({
    Name = "Recipient's Username",
    Default = "",
    TextDisappear = false,
    Callback = function(Value)
        recipientTextBox = Value
    end
})

MainTab:AddTextbox({
    Name = "Amount of Money",
    Default = "0",
    TextDisappear = false,
    Callback = function(Value)
        moneyTextBox = tonumber(Value) or 0
    end
})

MainTab:AddDropdown({
    Name = "Multiplier",
    Options = multipliers,
    Default = multipliers[1],
    Callback = function(Value)
        multiplierDropdown = Value
    end
})

MainTab:AddButton({
    Name = "Give Money",
    Callback = function()
        local recipientName = recipientTextBox
        local money = moneyTextBox
        local multiplier = multiplierDropdown

        local matchingPlayers = {}

        -- Find players whose usernames contain the recipient name
        for _, player in pairs(game.Players:GetPlayers()) do
            if string.find(player.Name:lower(), recipientName:lower()) then
                table.insert(matchingPlayers, player)
            end
        end

        if #matchingPlayers == 1 then
            local recipientPlayer = matchingPlayers[1]
            recipientName = recipientPlayer.Name

            -- Ensure the total money to give doesn't exceed the game's limit
            local maxMoneyPerTransaction = 10000
            local totalMoneyToGive = money * multiplier
            local numTransactions = math.ceil(totalMoneyToGive / maxMoneyPerTransaction)

            for _ = 1, numTransactions do
                local amountToGive = math.min(maxMoneyPerTransaction, totalMoneyToGive)
                totalMoneyToGive = totalMoneyToGive - amountToGive

                local children = workspace.Tycoons:GetChildren()
                for i, child in ipairs(children) do
                    if child.Info.Owner.Value == recipientName then
                        child.Control.Money:FireServer(amountToGive)
                        wait(1) -- Wait for 1 second between transactions
                    end
                end
            end

            OrionLib:MakeNotification({
                Name = "Money Sent",
                Content = "Successfully gave " .. recipientName .. " " .. money * multiplier .. " money",
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        elseif #matchingPlayers > 1 then
            -- Multiple matching players found, cannot determine recipient
            OrionLib:MakeNotification({
                Name = "Multiple Matches Found",
                Content = "Multiple players found with similar usernames. Be more specific.",
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        else
            -- No matching players found
            OrionLib:MakeNotification({
                Name = "Player Not Found",
                Content = "No player found with a similar username.",
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        end
    end
})

-- Add "Remove" Tab
local RemoveTab = Window:MakeTab({
    Name = "Remove",
    Icon = "rbxassetid://14828079730",
    PremiumOnly = false
})

local RemoveSection = RemoveTab:AddSection({
    Name = "Remove Section"
})

local playerToRemoveTextBox

RemoveTab:AddTextbox({
    Name = "Player to Remove Money From",
    Default = "",
    TextDisappear = false,
    Callback = function(Value)
        playerToRemoveTextBox = Value
    end
})

RemoveTab:AddButton({
    Name = "Remove Money",
    Callback = function()
        local playerToRemoveName = playerToRemoveTextBox
        local matchingPlayers = {}

        -- Find players whose usernames contain the player to remove's name
        for _, player in pairs(game.Players:GetPlayers()) do
            if string.find(player.Name:lower(), playerToRemoveName:lower()) then
                table.insert(matchingPlayers, player)
            end
        end

        if #matchingPlayers == 1 then
            local playerToRemovePlayer = matchingPlayers[1]
            playerToRemoveName = playerToRemovePlayer.Name

            -- Attempt to remove money from the player (you'll need the specific code for this game)
            -- Example code to remove money:
            -- playerToRemovePlayer:WaitForChild("leaderstats"):WaitForChild("Money").Value = 0

            OrionLib:MakeNotification({
                Name = "Money Removed",
                Content = "Successfully removed money from " .. playerToRemoveName,
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        elseif #matchingPlayers > 1 then
            -- Multiple matching players found, cannot determine recipient
            OrionLib:MakeNotification({
                Name = "Multiple Matches Found",
                Content = "Multiple players found with similar usernames. Be more specific.",
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        else
            -- No matching players found
            OrionLib:MakeNotification({
                Name = "Player Not Found",
                Content = "No player found with a similar username.",
                Image = "rbxassetid://14836421904",
                Time = 5
            })
        end
    end
})

OrionLib:Init()
